# Linux系统编程基础
## shell 学习手册
参考资源
- 高级bash脚本编程指南

### 说明
**阅读做笔记时间**：2021.03.08 ~ 

**笔记Owner**：Soler索莱尔HO

## 一、shell概述
在shell中，每个脚本的开头都使用 `#!` ，就是告知系统文件的执行都需要指定一个`解释器`。指定一个文件类型的特殊标记。
占用 `2 字节` 。

### 1、脚本解释器
shell极脚本都是以 `#!`开头，告知系统该文件的执行需要一个解释器。
常见的解释器类型如下：
```shell
#!/bin/sh
#!/bin/bash
#!/usr/bin/perl
#!/usr/bin/tcl
#!/bin/sed -f
#!/usr/awk -f
```
解释说明
- `#!/bin/sh` linux系统上默认是bash，多数UNIX商业OS中也默认shell。

### 2、调用脚本
执行脚本的三种方式：
```shell
1 sh scriptName.sh
2 bash scriptName.sh
```
第三种方式有一点特殊

```shell
./scriptName.sh  #需给文件授予执行权限
#实授予权限的方式如下
chmod +x scriptName.sh #授予可执行权限
chmod +rx scriptName.sh #授予任何人可执行可读和可执行权限
chmod u+rx scriptName.sh #只给脚本的所有者可读和可执行权限
```

### 3、shell中特殊字符
|特殊字符|功能|说明|注意|
|:--:|--|--|--|
|`#`|1.注释<br>2.声明命令解释器的类型<br>3.某些特定的模式匹配操作使用|1.注释方面：一般是行首中以 `#`作为开头<br>2.声明解释器类型一般是在脚本的第一行。*使用格式：`#!/bin/bash`*|命令不能和注释在同一行上，也就是注释的后面|
|`;`|命令分隔符，可以在同一行上写多个命令|某些情况需要使用转义符转义||
|`;;`|双分号，终止case选项|||
|`.`|bash内置命令|1.点`(.)`放在文件名前面表示隐藏文件。<br>2.移动文件操作时，如果是单独点作为参数`cp cxx/helloworld.sh .`表示当前工作目录<br>3.两个点`(..)`，表示上一级目录。<br>4.正则表达式中作为匹配任何的单个字符|||
|`" "`|双引号表示字符串|||
|`' '`|单引号表示字符|||
|`,`|逗号操作符|链接一系列操作||
|`\`|反斜杠`(\)`|对单个字符的引用机制|一般用来转义`双引号(" ")` 和`单引号(' ')`。||
|`/`|正斜杠`(/)`|1.作为文件名路径分隔符`/data/cxx/Makefile`<br>2.用作除法算术操作符||
|`*`|1.乘法算术操作符<br>2.两个`（**）`表示求幂运算符<br>3.通配符，可以用来匹配给定目录下的任何文件名|||
|`?`|1.测试通配符<br>2.通配符，在正则表达式中表示一个字符，也可以用来匹配单个字符。|在表达式中测试一个条件的结果，类似C语言中的三元操作符。|||
|`$`|1.引用变量<br>2.正则表达式中，表示`行结束符`。|||
|`${}`|参数替换|||
|`$* or $@`|位置参数|||
|`$$`|进程ID变量|保存所在脚本的进程ID||
|`$?`|退出状态码变量|可保存命令、函数或者脚本本身的退出状态码|一般是`0`或 `1`。|
|`{ }`|大括号，代码块，也叫作内部组。|在函数或者判断语句中使用代码块|在大括号中不允许有空白，除非空白被引用或者转义|
|`[ ]`|1.测试条件<br>2.数组元素 <br>3.字符范围|作为字符范围时，方括号描述一个匹配的字符范围||
|`> &> >& >> < <>`|重定向|||

### 4、转义符
转义符是一种引用单个字符的方法。添加`转义符（\）` 使得shell中的某个字符失去原有特殊含义。

注意：在`echo` 和 `sed` 中谨慎使用转义符，否则会有相反效果。

|转义符|含义|实例|
|--|--|--|
|`\n`|表示新的一行|`echo "first line";echo $'\n';echo "third line"`|
|`\r`|表示回车||
|`\t`|表示水平制表符||
|`\v`|表示垂直制表符||
|`\b`|表示后退符||
|`\a`|表示"alert" (蜂鸣器或闪烁)||
|`\0xx`|转换为八进制的ASCII码，等价于*0xx*||
|`\"`|表示引号||
|`\$`|表示`$`本身的意思，跟在后面的变量名不会起作用|`echo "\$variables~~~~"`|
|`\\`|表示反斜线|`echo "\\" #结果为 \`||
|||

~~赋值给变量的字符串的元素也会被转义, 但是不能把一个单独的转义符赋值给变量。~~

### 5、shell中关于`$0、$?、$!、$$、$*、$#、$@`
|字符符号|功能（用途）|
|:--:|--|
|`$0`|shell文件本身的`文件名`|
|`$1～$n`|添加到Shell的`各参数值`。`$1是第1参数、$2是第2参数、…、$n表示第n个参数`。|
|`$?`|最后运行命令的`结束代码（返回值）`|
|`$$`|Shell本身的PID（ProcessID）|
|`$!`|Shell最后运行的`后台Process的PID`|
|`$-`|使用Set命令设定的Flag一览|
|`$*`|所有参数列表。如 `"$*"用「"」括起来的情况、以"$1 $2 … $n"` 的形式输出所有参数。|
|`$@`|所有参数列表。如 `"$@"用「"」括起来的情况、以"$1" "$2" … "$n"` 的形式输出所有参数。|
|`$#`|添加到Shell的参数个数||

具体实例

## 二、变量问题
变量表示数据的方法。是计算机为了保存数据项而在内存中分配的一个位置或一组位置的标识或名字。
变量名就是保存值的地方。
### 1、变量引用
`显示变量`或者`替换变量`的过程就叫做 `变量引用`。
具体实例：
```shell
[root@centos8 data]# var01=3
[root@centos8 data]# echo $var01
3
```
在引用变量时，需要使用`$`来进行原因变量的值。

变量在使用过程中，如果没有`$`作为前缀，需要思考如下情况：
- 变量被声明或被赋值。
- 变量是否被`unset`
- 变量使用被用`export `方式导入
- 变量是否作为信号量。
- 变量赋值的两种方式：
	- 使用 `=` 方式。
	- 直接使用`read`命令。

